<html>
<head>
  <link href="https://unpkg.com/@triply/yasgui/build/yasgui.min.css" rel="stylesheet" type="text/css" />
  <script src="https://unpkg.com/@triply/yasgui/build/yasgui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/rdflib@2.2.31/dist/rdflib.min.js"></script>
</head>
<body>
  <div id="yasgui"></div>
  <script src="https://rdf.js.org/comunica-browser/versions/v2/engines/query-sparql/comunica-browser.js"></script>
<script language="JavaScript">
  console.log("COMMUNICA!!!!")
  new Comunica.QueryEngine().queryBindings(`
  SELECT * {
    ?s ?p <http://dbpedia.org/resource/Belgium>.
    ?s ?p ?o
  } LIMIT 100
`, {
  sources: ['https://sparqlunicorn.github.io/sparqlunicornGoesGIS_testdata/index.ttl'],
}).then(function (bindingsStream) {
  bindingsStream.on('data', function (data) {
	console.log("STREEEEEAM")
    // Each variable binding is an RDFJS term
    console.log(data.get('s').value + ' ' + data.get('p').value + ' ' + data.get('o').value);
  });
});
</script>
  <script>
    
  var store = $rdf.graph()
var timeout = 5000 // 5000 ms timeout
var fetcher = new $rdf.Fetcher(store, timeout)

fetcher.nowOrWhenFetched("https://sparqlunicorn.github.io/sparqlunicornGoesGIS_testdata/index.ttl", function(ok, body, response) {
	if (!ok) {
		console.log("Oops, something happened and couldn't fetch data " + body);
	} else if (response.onErrorWasCalled || response.status !== 200) {
		console.log('    Non-HTTP error reloading data! onErrorWasCalled=' + response.onErrorWasCalled + ' status: ' + response.status)
	} else {
		 console.log("---data loaded---")
		 console.log("LOADING YASGUI")
		 const yasgui = new Yasgui(document.getElementById("yasgui"));
		 //yasgui.getTab().yasqe.on("query", (instance: yasgui.getTab().yasqe, req: superagent.SuperAgentRequest) => { queryFile(yasgui.getTab().yasqe.getValue())});		 
}})

/*function queryFile(thequery){
	store.
}*/
  </script>
</body>
</html>
